<template name="gnttokens">
  <form id="gnttokens">
    <h2>
      {{title}}
      {{> whatisthis section="w-gnt-wrapped-gnt-tokens"}}
    </h2>
    <div>
      <table>
        <tbody>
          {{#if equals type 'deposit'}}
          <tr class="row-input-line">
            <th>
              GNT
            </th>
            <td class="token">
              {{formatBalance GNTBalance}}
            </td>
          </tr>
          {{else}}
          <tr class="row-input-line">
            <th>
              W-GNT
            </th>
            <td class="token">
              {{#let token=(findToken 'W-GNT')}}
                {{formatBalance token.balance}}
              {{/let}}
            </td>
          </tr>
          {{/if}}
          <tr class="row-input-line">
            <th>
              AMOUNT
            </th>
            <td>
              <input type="number" class="input amount" step="any" min="0" {{b "value: amount, attr: { max: maxAmount }"}}>
            </td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <th>
            </th>
            <td>
              <button class="btn btn-default" {{b "enable: canDeposit, click: deposit"}}>{{title}}</button>
            </td>
          </tr>
          {{#unless equals lastError ''}}
            <tr>
              <td colspan="2">
                {{lastError}}
              </td>
            </tr>
          {{/unless}}
        </tfoot>
      </table>
      {{#if equals type 'withdraw'}}
      {{#if pending}}
        <table>
          <tbody>
            <tr>
              <th colspan="2" style="text-align: center">
                Pending
              </th>
            </tr>
            {{#each pending}}
              <tr>
                <th>
                  {{this.type}}
                </th>
                <td>
                  {{this.amount}}
                </td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      {{/if}}
      {{/if}}
      {{#if equals type 'deposit'}}
      {{#if progress}}
      <div class="progress">
        <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="{{progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{progress}}%"></div>
      </div>
      {{/if}}
      {{#if progressMessage}}
        <div class="messageDiv alert alert-info">
          <span id='progressMessage'>{{{progressMessage}}}</span>
        </div>
      {{/if}}
      {{#if errorMessage}}
        <div class="messageDiv alert alert-danger">
          <span id='errorMessage'>{{{errorMessage}}}</span>
        </div>
      {{/if}}
      {{/if}}
    </div>
  </form>
</template>
